(function(t){function e(e){for(var a,o,s=e[0],c=e[1],l=e[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},r=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0104":function(t,e,n){},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=n("5f5b"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main",attrs:{id:"root"}},[a("div",{staticClass:"bg-dark"},[a("b-navbar",{staticClass:"container py-3",attrs:{type:"dark"}},[a("img",{staticClass:"mr-1",attrs:{src:n("c704"),alt:"Near Dice",height:"32px"}}),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",[a("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticClass:"ml-3",attrs:{href:"#"}},[a("strong",[t._v("How To Play ?")])])],1),a("b-modal",{attrs:{id:"modal-1",title:"How To Play?","hide-footer":""}},[a("p",{staticClass:"my-1"},[t._v("On home page, user can see the whole status of playground without login, i.e. an NEAR account is not necessary. He would have full imformation about owner account of this contract, dice price, commission fee rate, the size of current jackpod and etc.")]),a("p",{staticClass:"my-2"},[t._v("Then, user can login with NEAR account and buy several dices. With dices bought, he can guess a number and roll dice again and again. If the dice point is equal to his guess, half of jackpod would belong to him. Otherwise the amount he paid for the dice would belong to the jackpod.")]),a("p",{staticClass:"my-2"},[t._v("During playing, the latest 20 win records would appear and be auto refreshed on screen too.")])]),a("b-navbar-nav",{staticClass:"ml-auto"},[a("button",{directives:[{name:"show",rawName:"v-show",value:t.isSignedIn,expression:"isSignedIn"}],staticClass:"btn btn-info",staticStyle:{float:"right"},on:{click:t.logout}},[t._v(" Sign Out ")]),a("button",{directives:[{name:"show",rawName:"v-show",value:!t.isSignedIn,expression:"!isSignedIn"}],staticClass:"btn btn-info",staticStyle:{float:"right"},on:{click:t.login}},[t._v(" Sign In ")])])],1)],1)],1),a("div",{staticClass:"container pt-4"},[a("SignedIn")],1),t._m(0)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"bd-footer p-3 p-md-5 mt-5 bg-light text-center text-sm-start"},[n("div",{staticClass:"container text-center"},[n("p",[n("strong",[t._v(" NEAR DICE DAPP")])]),n("span",[t._v("Copyright 2021")])])])}],s=(n("99af"),n("0104"),n("db49")),c=n.n(s),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"vld-parent"},[n("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":t.fullPage},on:{"update:active":function(e){t.isLoading=e}}})],1),n("main",[n("h1",{directives:[{name:"show",rawName:"v-show",value:t.isSignedIn,expression:"isSignedIn"}],staticClass:"shadow py-2"},[t._v(" Welcome "+t._s(t.accountId)+", You have "+t._s(this.leftCount)+" dice(s) ")]),n("div",{staticClass:"contianer"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-3"},[n("form",{staticClass:"shadow mt-5 py-4",on:{submit:function(e){return e.preventDefault(),t.buyDice(e)}}},[n("fieldset",{ref:"fieldset"},[n("div",{staticClass:"form-group py-3"},[n("span",{staticClass:"text-white"},[t._v("Buy ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.rollCount,expression:"rollCount"}],staticClass:"ml-2 mr-2",attrs:{name:"rollCount",id:"roll"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.rollCount=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"1",selected:"selected"}},[t._v("1")]),n("option",{attrs:{value:"5"}},[t._v("5")]),n("option",{attrs:{value:"10"}},[t._v("10")]),n("option",{attrs:{value:"30"}},[t._v("30")]),n("option",{attrs:{value:"50"}},[t._v("50")]),n("option",{attrs:{value:"100"}},[t._v("100")]),n("option",{attrs:{value:"1000"}},[t._v("1000")])]),n("span",{staticClass:"text-white"},[t._v(" times")]),n("button",{staticClass:"btn btn-danger btn-sm ml-2",attrs:{id:"buy_dice"}},[t._v(" Buy ")])])])])]),n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"mt-5"},[n("h2",{staticClass:"text-white text-center"},[t._v("Jackpot:")]),n("p",{staticClass:"text-center"},[n("span",{staticClass:"display-3",staticStyle:{"letter-spacing":"0.5rem"}},[t._v(t._s(t.jackpot))]),t._v("Near")]),n("p",{staticClass:"text-center display-4 text-white"},[t._v("Recent Wins")]),n("table",{staticClass:"table table-hover",staticStyle:{border:"solid 1px #dee2e6",background:"#fff"}},[t._m(0),n("tbody",t._l(t.winList,(function(e){return n("tr",{key:e.height},[n("th",{attrs:{scope:"row"}},[t._v(t._s(e.height))]),n("td",[t._v(t._s(e.user))]),n("td",[n("span",{staticStyle:{color:"green"}},[t._v(t._s(t.formatAmount(e.amount)))]),t._v(" Near")])])})),0)])])]),n("div",{staticClass:"col-md-3"},[n("form",{staticClass:"shadow mt-5 py-4",on:{submit:function(e){return e.preventDefault(),t.rollDice(e)}}},[n("fieldset",{ref:"fieldset"},[n("div",[n("span",{staticClass:"text-white"},[t._v("Select number to bet")]),n("br"),n("ul",[n("li",{staticClass:"number-item"},[n("a",{class:t.active1,on:{click:function(e){return t.chooseNumber(1)}}},[t._v("1")])]),n("li",{staticClass:"number-item"},[n("a",{class:t.active2,on:{click:function(e){return t.chooseNumber(2)}}},[t._v("2")])]),n("li",{staticClass:"number-item"},[n("a",{class:t.active3,on:{click:function(e){return t.chooseNumber(3)}}},[t._v("3")])]),n("li",{staticClass:"number-item"},[n("a",{class:t.active4,on:{click:function(e){return t.chooseNumber(4)}}},[t._v("4")])]),n("li",{staticClass:"number-item"},[n("a",{class:t.active5,on:{click:function(e){return t.chooseNumber(5)}}},[t._v("5")])]),n("li",{staticClass:"number-item"},[n("a",{class:t.active6,on:{click:function(e){return t.chooseNumber(6)}}},[t._v("6")])])]),n("button",{staticClass:"btn btn-warning btn-sm ml-2 mt-2",attrs:{id:"roll_dice"}},[t._v(" Roll ")])])])])])])])])])},u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("Height")]),n("th",{attrs:{scope:"col"}},[t._v("Username")]),n("th",{attrs:{scope:"col"}},[t._v("Prize")])])])}],d=n("1da1"),h=(n("96cf"),n("d3b7"),n("25f0"),n("5319"),n("ac1f"),n("d9eb")),v=c()("production");function p(){return f.apply(this,arguments)}function f(){return f=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["connect"])(Object.assign({deps:{keyStore:new h["keyStores"].BrowserLocalStorageKeyStore}},v));case 2:return e=t.sent,window.walletConnection=new h["WalletConnection"](e),window.accountId=window.walletConnection.getAccountId(),t.next=7,new h["Contract"](window.walletConnection.account(),v.contractName,{viewMethods:["get_greeting","get_account_dice_count","get_win_history","get_contract_info"],changeMethods:["set_greeting","roll_dice","buy_dice"]});case 7:window.contract=t.sent;case 8:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function g(){window.walletConnection.signOut(),window.location.replace(window.location.origin+window.location.pathname)}function m(){window.walletConnection.requestSignIn(v.contractName)}console.log(v);var w=n("9062"),b=n.n(w),_=(n("e40d"),{name:"SignedIn",components:{Loading:b.a},data:function(){return{gas:Math.pow(10,14).toString(),at:"000000000000000000000000",savedGreeting:"",newGreeting:"",leftCount:0,rollCount:1,rollNumber:1,jackpot:"--",winList:{},active1:"active",active2:"",active3:"",active4:"",active5:"",active6:"",isLoading:!1,fullPage:!0}},created:function(){this.getLeftCount(),this.getWinHistory(),this.getContactInfo()},computed:{isSignedIn:function(){return!!window.walletConnection&&window.walletConnection.isSignedIn()},accountId:function(){return window.accountId},contractId:function(){return window.contract?window.contract.contractId:null},networkId:function(){return window.networkId}},methods:{chooseNumber:function(t){console.log(t),this.rollNumber=t,1==t&&(this.active1="active",this.active2="",this.active3="",this.active4="",this.active5="",this.active6=""),2==t&&(this.active1="",this.active2="active",this.active3="",this.active4="",this.active5="",this.active6=""),3==t&&(this.active1="",this.active2="",this.active3="active",this.active4="",this.active5="",this.active6=""),4==t&&(this.active1="",this.active2="",this.active3="",this.active4="active",this.active5="",this.active6=""),5==t&&(this.active1="",this.active2="",this.active3="",this.active4="",this.active5="active",this.active6=""),6==t&&(this.active1="",this.active2="",this.active3="",this.active4="",this.active5="",this.active6="active")},getLeftCount:function(){var t=this;window.contract.get_account_dice_count({account_id:window.accountId}).then((function(e){t.leftCount=e}))},showDice:function(t){this.diceNum=t,this.diceStart=!this.diceStart},buyDice:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.isSignedIn){t.next=3;break}return alert("Please Sign In"),t.abrupt("return");case 3:return this.$refs.fieldset.disabled=!0,t.prev=4,t.next=7,window.contract.buy_dice({},this.gas,parseInt(this.rollCount)+this.at);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](4),console.log(t.t0);case 12:return t.prev=12,this.$refs.fieldset.disabled=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[4,9,12,15]])})));function e(){return t.apply(this,arguments)}return e}(),rollDice:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.isSignedIn){t.next=3;break}return alert("Please Sign In"),t.abrupt("return");case 3:if(!(this.leftCount<=0)){t.next=6;break}return alert("Sorry, you need to buy chances of dice rolls"),t.abrupt("return");case 6:return this.isLoading=!0,this.$refs.fieldset.disabled=!0,t.prev=8,t.next=11,window.contract.roll_dice({target:parseInt(this.rollNumber)}).then((function(t){if(e.isLoading=!1,e.getWinHistory(),t.dice_point===t.user_guess){var n=t.reward_amount.toString(),a=n.substr(0,n.length-20),i=a.substr(0,a.length-4),r=a.substr(0,i.legnth);alert("Congratulations to you, you win "+i+"."+r+" near")}else alert("You lose, the number is "+t.dice_point);e.leftCount=e.leftCount-1,e.jackpot=e.formatAmount(t.jackpod_left),console.log(t)}));case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](8),console.log(t.t0);case 16:return t.prev=16,this.$refs.fieldset.disabled=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,this,[[8,13,16,19]])})));function e(){return t.apply(this,arguments)}return e}(),getWinHistory:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.contract.get_win_history({from_index:0,limit:20}).then((function(t){e.winList=t,console.log(t)}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));function e(){return t.apply(this,arguments)}return e}(),getContactInfo:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.contract.get_contract_info({}).then((function(t){e.jackpot=e.formatAmount(t.jack_pod),console.log(t)}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));function e(){return t.apply(this,arguments)}return e}(),formatAmount:function(t){var e=t.toString(),n=e.substr(0,e.length-20),a=n.substr(0,n.length-4),i=n.substr(0,a.legnth);return a+"."+i},logout:g}}),C=_,y=n("2877"),k=Object(y["a"])(C,l,u,!1,null,null,null),x=k.exports,I=c()("production");console.log("networkId:".concat(I.networkId," CONTRACT_NAME:").concat(I.contractName)),window.networkId=I.networkId;var S={created:function(){document.title="NEAR DICE"},name:"App",components:{SignedIn:x},computed:{isSignedIn:function(){return window.walletConnection.isSignedIn()}},methods:{login:function(){console.log("calling utils.login"),m()},logout:g}},N=S,j=Object(y["a"])(N,r,o,!1,null,null,null),O=j.exports;n("f9e3"),n("2dd8");a["default"].use(i["a"]),a["default"].config.productionTip=!1,window.nearInitPromise=p().then((function(){new a["default"]({render:function(t){return t(O)}}).$mount("#app")}))},c704:function(t,e,n){t.exports=n.p+"img/neardice-logo.74eebb3e.png"},db49:function(t,e){var n=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_CONTRACT_NAME||"dice1.michaelshapkin.testnet";function a(t){switch(t){case"production":case"mainnet":case"development":case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:n,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"};case"betanet":return{networkId:"betanet",nodeUrl:"https://rpc.betanet.near.org",contractName:n,walletUrl:"https://wallet.betanet.near.org",helperUrl:"https://helper.betanet.near.org",explorerUrl:"https://explorer.betanet.near.org"};case"local":return{networkId:"local",nodeUrl:"http://localhost:3030",keyPath:"".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).HOME,"/.near/validator_key.json"),walletUrl:"http://localhost:4000/wallet",contractName:n};case"test":case"ci":return{networkId:"shared-test",nodeUrl:"https://rpc.ci-testnet.near.org",contractName:n,masterAccount:"test.near"};case"ci-betanet":return{networkId:"shared-test-staging",nodeUrl:"https://rpc.ci-betanet.near.org",contractName:n,masterAccount:"test.near"};default:throw Error("Unconfigured environment '".concat(t,"'. Can be configured in src/config.js."))}}t.exports=a}});
//# sourceMappingURL=app.75f5f141.js.map